import{s as q,a as N,I as J,e as A,$ as P,J as Q,bn as W,v as i,q as x,w as n,k as e,h as c,f as R,g as D,t as H,K as m,L as $,O as X,R as Y,F as M,j as T,o as d,G as Z,r as L,N as ee,aD as te,ar as oe,x as le}from"./app-eQbeWD5H.js";import{E as ae}from"./index-BmNEnJU1.js";import{a as ne,E as se}from"./index-Cwmhy3qH.js";import{a as re,E as ie}from"./index-CdIeTvoW.js";import{E as G,a as I}from"./index-VRqMfdzO.js";import"./castArray-7KkzOv2q.js";import"./clone-BIcN8QqB.js";import"./_baseClone-D2nDHxTt.js";import"./isEqual-CLYQoJlu.js";import"./_initCloneObject-CEcXreET.js";import"./index-BOPAf95y.js";import"./_baseIteratee-CPsVIgij.js";import"./merge-n0rrKiL5.js";import"./isArrayLikeObject-CFDQt_XA.js";import"./index-D9z2151g.js";const O=q("forward",{state:()=>({panel:{visible:!1,loading:!1,edit:{id:null,name:null,autoStartUp:null,type:null,localHost:null,localPort:null,remoteHost:null,remotePort:null}}})});var B=(p=>(p[p.Stop=0]="Stop",p[p.Running=1]="Running",p[p.AlreadyUsed=2]="AlreadyUsed",p))(B||{});const de={class:"mb-2 ml-20"},ue={class:"flex flex-row items-center w-72"},me={class:"forward-arrow"},ce={key:0,class:"el-icon-bottom"},pe={key:1,class:"el-icon-top"},ve={class:"flex flex-row items-center w-72"},fe={class:"flex flex-row"},ye=N({__name:"ForwardDialog",emits:["save"],setup(p,{emit:g}){const w=J({host:null}),S=g,V=O(),o=A(()=>V.panel),u=A(()=>o.value.edit.type=="Dynamic"?"1080":"port"),r=A(()=>{switch(o.value.edit.type){case"Local":return P("ssh.portForward.local");case"Remote":return P("ssh.portForward.remote")}return P("ssh.portForward.dynamic")});Q(()=>o.value.edit.type,v=>{o.value.edit.id||(o.value.edit.remoteHost=v=="Remote"?w.host:"127.0.0.1")}),W(()=>{i.on("config",v=>{Object.assign(w,v)})});const f=()=>{S("save",o.value.edit),o.value.loading=!0};return(v,t)=>{const U=$("RedMark"),E=ie,F=re,k=ne,C=X,h=$("vsc-switch"),z=se,a=$("vsc-button"),b=ae;return d(),x(b,{ref:"editDialog",modelValue:o.value.visible,"onUpdate:modelValue":t[11]||(t[11]=l=>o.value.visible=l),"show-close":!1,title:"Port Fowarding",width:"550px",top:"3vh",closeOnClickModal:!1},{footer:n(()=>[e(a,{type:"secondary",onClick:t[10]||(t[10]=l=>o.value.visible=!1)},{default:n(()=>[m(H(T(P)("common.cancel")),1)]),_:1}),e(a,{loading:o.value.loading,onClick:f},{default:n(()=>t[20]||(t[20]=[m("Save")])),_:1},8,["loading"])]),default:n(()=>[e(z,{ref:"infoForm",model:o.value.edit,"label-width":"120px"},{default:n(()=>[c("div",de,H(r.value),1),e(k,null,{label:n(()=>[e(U),t[12]||(t[12]=m("Type "))]),default:n(()=>[e(F,{modelValue:o.value.edit.type,"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.edit.type=l),type:"relax"},{default:n(()=>[e(E,{modelValue:o.value.edit.type,"onUpdate:modelValue":t[0]||(t[0]=l=>o.value.edit.type=l),value:"Local"},{default:n(()=>t[13]||(t[13]=[m("Local")])),_:1},8,["modelValue"]),e(E,{modelValue:o.value.edit.type,"onUpdate:modelValue":t[1]||(t[1]=l=>o.value.edit.type=l),value:"Remote"},{default:n(()=>t[14]||(t[14]=[m("Remote")])),_:1},8,["modelValue"]),e(E,{modelValue:o.value.edit.type,"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.edit.type=l),value:"Dynamic"},{default:n(()=>t[15]||(t[15]=[m(" Dynamic(Socks Proxy) ")])),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(k,null,{label:n(()=>[e(U),t[16]||(t[16]=m("Local "))]),default:n(()=>[c("div",ue,[e(C,{modelValue:o.value.edit.localHost,"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.edit.localHost=l),class:"basis-72"},null,8,["modelValue"]),t[17]||(t[17]=c("span",{class:"basis-14 text-center text-base"},":",-1)),e(C,{modelValue:o.value.edit.localPort,"onUpdate:modelValue":t[5]||(t[5]=l=>o.value.edit.localPort=l),placeholder:u.value,class:"basis-32"},null,8,["modelValue","placeholder"])])]),_:1}),o.value.edit.type!="Dynamic"?(d(),R(M,{key:0},[c("div",me,[o.value.edit.type=="Remote"?(d(),R("i",ce)):(d(),R("i",pe))]),e(k,null,{label:n(()=>[e(U),t[18]||(t[18]=m("Remote "))]),default:n(()=>[c("div",ve,[e(C,{modelValue:o.value.edit.remoteHost,"onUpdate:modelValue":t[6]||(t[6]=l=>o.value.edit.remoteHost=l),class:"basis-72"},null,8,["modelValue"]),t[19]||(t[19]=c("span",{class:"basis-14 text-center text-base"},":",-1)),e(C,{modelValue:o.value.edit.remotePort,"onUpdate:modelValue":t[7]||(t[7]=l=>o.value.edit.remotePort=l),placeholder:"port",class:"basis-32",onKeyup:Y(f,["enter"])},null,8,["modelValue"])])]),_:1})],64)):D("",!0),c("div",fe,[e(k,{label:"Name",class:"w-64"},{default:n(()=>[e(C,{modelValue:o.value.edit.name,"onUpdate:modelValue":t[8]||(t[8]=l=>o.value.edit.name=l)},null,8,["modelValue"])]),_:1}),e(k,{class:"auto-start-form-item",label:"Auto Start",title:"Auto start with VS Code startup"},{default:n(()=>[e(h,{modelValue:o.value.edit.autoStartUp,"onUpdate:modelValue":t[9]||(t[9]=l=>o.value.edit.autoStartUp=l),class:"ml-2"},null,8,["modelValue"])]),_:1})])]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),_e=Z(ye,[["__scopeId","data-v-78656478"]]),we={class:"flex justify-start items-center mb-4"},be={class:"space-x-2"},ge=N({__name:"ForwardServerTable",props:{serverList:Array},emits:["selectServer","importConfig","exportConfig"],setup(p,{emit:g}){const w=g,S=()=>{i.emit("importConfig",{type:"merge"})},V=()=>{i.emit("exportConfig")};return(o,u)=>{const r=$("vsc-button"),f=I,v=G;return d(),R("div",null,[c("div",we,[u[3]||(u[3]=c("h2",{class:"text-xl font-semibold mr-4"},"Server Port Forwarding",-1)),c("div",be,[e(r,{type:"primary",size:"micro",style:{color:"var(--vscode-terminal-ansiBrightGreen)"},icon:"codicon-refresh",onClick:u[0]||(u[0]=t=>T(i).emit("load"))}),e(r,{type:"primary",size:"micro",icon:"codicon-arrow-down",onClick:V},{default:n(()=>u[1]||(u[1]=[m("Export")])),_:1}),e(r,{type:"primary",size:"micro",icon:"codicon-arrow-up",onClick:S},{default:n(()=>u[2]||(u[2]=[m("Import")])),_:1})])]),e(v,{data:p.serverList,style:{width:"100%"},class:"rounded-md shadow-sm"},{default:n(()=>[e(f,{prop:"key",label:"Key",width:"150",align:"center"}),e(f,{prop:"name",label:"Name",width:"350",align:"center"}),e(f,{prop:"count",label:"Count",width:"70",align:"center"}),e(f,{label:"Operation",width:"120",align:"center"},{default:n(({row:t})=>[e(r,{type:"icon",icon:"codicon-edit",title:"Edit Configuration",class:"hover:opacity-80",onClick:U=>w("selectServer",t)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])])}}}),Ve={class:"p-3"},ke={class:"mb-3 text-base"},Ce={class:"mr-5"},Ne=N({__name:"forward",setup(p){const g=L(""),w=L(null),S=L([]),V=L([]),o=L(!1),u=O(),r=A(()=>u.panel);ee(()=>{i.on("forwardList",a=>{V.value=a,r.value.loading=!1,r.value.visible=!1}).on("importResult",a=>{a.success&&(te(a.message),i.emit("load"))}).on("serverList",a=>{S.value=a}).on("name",a=>{g.value=a}).on("success",()=>{i.emit("load")}).on("error",({id:a,message:b})=>{for(const l of V.value)l.id==a&&(l.loading=!1);r.value.loading=!1,oe({message:b,type:"error"})}).init()});const f=a=>{g.value=a.name,w.value=a.key,o.value=!1,i.emit("selectServer",a.key)},v=a=>{i.emit("save",{info:a,serverKey:w.value})},t=()=>{r.value.edit={type:"Local",autoStartUp:!1,localHost:"127.0.0.1",remoteHost:"127.0.0.1"},r.value.visible=!0},U=()=>{i.emit("load")},E=a=>{switch(a){case B.Running:return"Running";case B.AlreadyUsed:return"AlreadyUsed";default:return"Stop"}},F=a=>{a.loading=!0,i.emit("start",a.id)},k=a=>{i.emit("stop",a)},C=a=>{i.emit("remove",{id:a,serverKey:w.value})},h=a=>{r.value.edit={...a},r.value.visible=!0},z=a=>{le(P("confirm.deleteForward")).then(()=>{C(a)})};return(a,b)=>{const l=$("vsc-button"),y=I,K=$("vsc-switch"),j=G;return d(),R("div",Ve,[o.value?(d(),x(ge,{key:0,serverList:S.value,onSelectServer:f},null,8,["serverList"])):(d(),R(M,{key:1},[c("div",ke,[c("span",Ce,"Connection: "+H(g.value),1),e(l,{size:"micro",icon:"codicon-refresh text-base",style:{color:"var(--vscode-terminal-ansiBrightGreen)"},onClick:U}),e(l,{size:"micro",icon:"codicon-add text-base",style:{color:"var(--vscode-terminal-ansiCyan)"},onClick:t}),e(l,{size:"micro",icon:"codicon-arrow-left",onClick:b[0]||(b[0]=s=>o.value=!0)},{default:n(()=>b[1]||(b[1]=[m(" Manager ")])),_:1})]),e(j,{data:V.value,style:{width:"100%"}},{default:n(()=>[e(y,{prop:"name",label:"Name"}),e(y,{prop:"type",label:"Type"}),e(y,{prop:"localPort",label:"Local Port"}),e(y,{prop:"remoteHost",label:"Remote Host",width:"120"}),e(y,{prop:"remotePort",label:"Remote Port",width:"120"}),e(y,{prop:"keepAlive",label:"KeepAlive"},{default:n(s=>[e(K,{modelValue:s.row.keepAlive,"onUpdate:modelValue":_=>s.row.keepAlive=_,onChange:_=>v(s.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(y,{prop:"autoStartUp",label:"AutoStart"},{default:n(s=>[e(K,{modelValue:s.row.autoStartUp,"onUpdate:modelValue":_=>s.row.autoStartUp=_,onChange:_=>v(s.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(y,{prop:"state",label:"State"},{default:n(s=>[s.row.state==0?(d(),x(l,{key:0,type:"icon",icon:"el-icon-close text-base text-red"})):s.row.state==1?(d(),x(l,{key:1,type:"icon",icon:"el-icon-check text-base text-green"})):(d(),x(l,{key:2,type:"icon",icon:"el-icon-video-pause text-base text-yellow"})),m(" "+H(E(s.row.state)),1)]),_:1}),e(y,{fixed:"right",width:"200"},{default:n(s=>[s.row.state!=1?(d(),x(l,{key:0,type:"success",size:"mini",title:"Start",loading:s.row.loading,icon:"el-icon-video-play",style:{color:"var(--vscode-terminal-ansiBrightGreen)"},circle:"",onClick:_=>{F(s.row)}},null,8,["loading","onClick"])):D("",!0),s.row.state==1?(d(),x(l,{key:1,type:"danger",size:"mini",title:"Stop",icon:"el-icon-switch-button",circle:"",onClick:_=>{k(s.row.id)}},null,8,["onClick"])):D("",!0),e(l,{type:"primary",size:"mini",title:"Edit",icon:"el-icon-edit",style:{color:"var(--vscode-terminal-ansiCyan)"},circle:"",onClick:_=>{h(s.row)}},null,8,["onClick"]),e(l,{title:"delete",type:"danger",size:"mini",icon:"el-icon-delete",style:{color:"#f56c6c"},circle:"",onClick:_=>z(s.row.id)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])],64)),e(_e,{onSave:v})])}}});export{Ne as default};
