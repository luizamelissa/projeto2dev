import{a as I,C as L,r as _,e as j,N as B,bq as E,v as d,f as p,af as M,k as c,ak as O,j as n,h as a,F as P,D as R,w as u,$ as m,L as S,n as w,g as $,K as q,t as J,av as U,q as h,aj as F,br as K,y as Q,o as l,G as z}from"./app-eQbeWD5H.js";import{_ as G}from"./vscode-MMfGApC2.js";import{u as H}from"./resultUIStore-B99m8FiP.js";import"./constants-Bw-uDUhc.js";import{b as g,D as k}from"./DatabaseType-mO-SQkME.js";import"./wrapper-CpU0l5lg.js";import"./viewUtil-B7upAtw9.js";import"./arrayUtil-CKU0aNL-.js";import"./objectUtil-Z6JRxuBJ.js";const W={id:"tableTab",class:"tab"},X=["onClick"],Y=I({__name:"Main",setup(Z){const y=E(),v=H(),N=L(),s=_(null),b=_(!1),r=_("result"),T=j(()=>[{id:"design",i18n:"table.design",icon:"codicon-edit",disabled:()=>!b.value},{id:"result",i18n:"table.data",icon:"codicon-database blue"},{id:"log",i18n:"common.log",icon:"codicon-file",hidden:()=>s.value==k.ES},{id:"erDiagram",i18n:"table.erDiagram",icon:"codicon-symbol-class yellow",hidden:()=>g(s.value),disabled:()=>!b.value||g(s.value)},{id:"status",i18n:"table.monitor",icon:"codicon-graph-line",disabled:()=>!v.monitorStatus.hasAnyMonitor,hidden:()=>g(s.value)},{id:"es-status",i18n:"table.monitor",icon:"codicon-graph-line",hidden:()=>s.value!=k.ES}].filter(t=>{var e;return!((e=t.hidden)!=null&&e.call(t))})),f=t=>{typeof t=="string"&&(t={id:t});const{id:e,disabled:o}=t;o!=null&&o()||r.value!==e&&(r.value=e,y.push(e),e=="log"&&d.emit("initTerminal"))};B(()=>{r.value=y.currentRoute.value.name,window.addEventListener("message",({data:t})=>{["RUN","DATA"].includes(t.type)&&(s.value=t.content.dbType,["design","result","erDiagram"].includes(r.value)||f("result"))}),d.on("table_info",({singleTable:t,dbType:e,monitorStatus:o})=>{s.value=e,b.value=t,Object.assign(v.monitorStatus,o),b.value||f("result")})});const D=()=>{d.emit("editInVSCode",v.toolbar.sql)},x=()=>{if(!N.isPay)return Q(m("plan.premiumNotice"));d.emit("viewJSON")};return(t,e)=>{const o=S("vsc-tooltip"),V=S("router-view");return l(),p("div",null,[M(a("ul",W,[(l(!0),p(P,null,R(T.value,(i,A)=>{var C;return l(),p("li",{key:A,class:w(["tab__item",{"tab__item--active":r.value==i.id,disabled:(C=i.disabled)==null?void 0:C.call(i)}]),onClick:ee=>f(i)},[i.icon?(l(),p("i",{key:0,type:"icon",class:w(i.icon),style:{position:"relative",top:"3px"}},null,2)):$("",!0),q(" "+J(n(m)(i.i18n)),1)],10,X)}),128)),c(o,{title:n(m)("table.editInVSCode")},{default:u(()=>[a("div",{class:"panel-icon !pl-2",style:{"border-left":"1px solid var(--border-color)"},onClick:D},e[1]||(e[1]=[a("img",{src:G,alt:"VSCode Logo"},null,-1)]))]),_:1},8,["title"]),c(o,{title:n(m)("table.viewAsJSON")},{default:u(()=>[a("div",{class:"panel-icon",onClick:x},e[2]||(e[2]=[a("i",{class:"codicon-json text-yellow"},null,-1)]))]),_:1},8,["title"]),c(o,{title:n(m)("table.history")},{default:u(()=>[a("div",{class:"panel-icon",onClick:e[0]||(e[0]=i=>n(d).emit("viewHistory"))},e[3]||(e[3]=[a("i",{class:"codicon-history"},null,-1)]))]),_:1},8,["title"])],512),[[O,n(v).showSQLPanel]]),c(V,null,{default:u(({Component:i})=>[c(U,null,{default:u(()=>[(l(),h(K,null,[(l(),h(F(i)))],1024))]),_:2},1024)]),_:1})])}}}),ce=z(Y,[["__scopeId","data-v-26cb6133"]]);export{ce as default};
