import{a as P,f as V,n as ee,h as s,ag as oe,o as g,G as D,C as G,r as b,v as f,ar as L,q as A,w as o,t,k as e,j as h,L as E,K as u,e as H,N as J,g as U,O as te,y as Q,$ as W,F as I,D as R}from"./app-eQbeWD5H.js";import{E as T}from"./index-Bv8Gp-yn.js";import{E as ne,a as se}from"./index-BaerFzpf.js";import{E as le}from"./index-D9z2151g.js";import"./index-BOPAf95y.js";import"./index-CloKM7er.js";import"./isEqual-CLYQoJlu.js";import"./index-CdJgEYxU.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-CPsVIgij.js";import"./castArray-7KkzOv2q.js";const ie={class:"card"},ae=P({__name:"Card",props:{full:Boolean},setup(O){return(c,m)=>(g(),V("div",{class:ee(["card-container",{"card-container-full":O.full}])},[s("div",ie,[oe(c.$slots,"default",{},void 0,!0)])],2))}}),B=D(ae,[["__scopeId","data-v-798fd364"]]),re={style:{"min-width":"290px"}},ce={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},ue={class:"mt-4 mb-2 flex items-center"},de={class:"mr-2"},me={class:"mt-4 mb-2"},pe={class:"mr-2"},ve={class:"text-right mt-2"},fe={class:"mt-4 mb-2"},_e={class:"mr-2"},ge={class:"text-right mt-2"},ye=P({__name:"ConnectionConfig",setup(O){const c=G(),m=b(!1),d=b(!1);f.on("importConfirm",()=>{m.value=!0}).on("importWorkspaceConfirm",()=>{d.value=!0}).on("importResult",({success:i,message:n,cancel:w})=>{if(m.value=!1,d.value=!1,w)return;L({duration:i?1e3:2e3,message:n,type:i?"success":"error"})});const y=i=>{f.emit("editConfig",i)},r=i=>{f.emit("exportConfig",{workspace:i===!0,withQueryFiles:c.uiState.consoleOption.exportWithAdditionalFiles})},p=(i={})=>{f.emit("importConfig",i)};return(i,n)=>{const w=E("vsc-switch"),v=E("vsc-button"),x=T,S=E("pay-badge");return g(),A(B,{class:"!mb-3"},{default:o(()=>[s("div",re,[s("div",ce,t(i.$t("console.configuration")),1),s("section",ue,[s("span",de,t(i.$t("console.exportWithAdditionalFiles"))+":",1),e(w,{modelValue:h(c).uiState.consoleOption.exportWithAdditionalFiles,"onUpdate:modelValue":n[0]||(n[0]=_=>h(c).uiState.consoleOption.exportWithAdditionalFiles=_),onChange:n[1]||(n[1]=_=>h(c).upState("consoleOption"))},null,8,["modelValue"])]),s("section",me,[e(S,{left:0},{default:o(()=>[s("span",pe,t(i.$t("connect.current"))+":",1),e(v,{type:"secondary",icon:"codicon-edit",disabled:!h(c).isPay,size:"mini",onClick:n[2]||(n[2]=_=>y(!0))},null,8,["disabled"]),e(v,{icon:"codicon-arrow-down",disabled:!h(c).isPay,size:"mini",onClick:n[3]||(n[3]=_=>r(!0))},null,8,["disabled"]),e(x,{placement:"top",visible:d.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(v,{icon:"codicon-arrow-up",disabled:!h(c).isPay,size:"mini",onClick:n[7]||(n[7]=_=>p({workspace:!0}))},null,8,["disabled"])]),default:o(()=>[s("p",null,t(i.$t("console.mergeConfirm")),1),s("div",ve,[e(v,{type:"secondary",size:"mini",onClick:n[4]||(n[4]=_=>d.value=!1)},{default:o(()=>[u(t(i.$t("common.cancel")),1)]),_:1}),e(v,{onClick:n[5]||(n[5]=_=>p({type:"merge",workspace:!0}))},{default:o(()=>[u(t(i.$t("console.merge")),1)]),_:1}),e(v,{onClick:n[6]||(n[6]=_=>p({type:"overwrite",workspace:!0}))},{default:o(()=>[u(t(i.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"])]),_:1})]),s("section",fe,[s("span",_e,t(i.$t("connect.global"))+":",1),e(v,{type:"secondary",icon:"codicon-edit",size:"mini",onClick:y},{default:o(()=>[u(t(i.$t("console.edit")),1)]),_:1}),e(v,{icon:"codicon-arrow-down",size:"mini",onClick:r},{default:o(()=>[u(t(i.$t("console.export")),1)]),_:1}),e(x,{placement:"top",visible:m.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(v,{icon:"codicon-arrow-up",size:"mini",onClick:n[11]||(n[11]=_=>p())},{default:o(()=>[u(t(i.$t("console.import")),1)]),_:1})]),default:o(()=>[s("p",null,t(i.$t("console.mergeConfirm")),1),s("div",ge,[e(v,{type:"secondary",onClick:n[8]||(n[8]=_=>m.value=!1)},{default:o(()=>[u(t(i.$t("common.cancel")),1)]),_:1}),e(v,{onClick:n[9]||(n[9]=_=>p({type:"merge"}))},{default:o(()=>[u(t(i.$t("console.merge")),1)]),_:1}),e(v,{onClick:n[10]||(n[10]=_=>p({type:"overwrite"}))},{default:o(()=>[u(t(i.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"])])])]),_:1})}}}),Ce={style:{"min-width":"290px"}},$e={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},be={key:0,class:"mt-2 flex items-center"},ke={class:"mr-2"},he={style:{"margin-top":"5px","margin-bottom":"10px"}},we={style:{"text-align":"right",margin:"0"}},Se={style:{"margin-top":"5px","margin-bottom":"10px"}},ze={style:{"text-align":"right",margin:"0"}},Ve={style:{"margin-top":"5px","margin-bottom":"10px"}},Oe={style:{"text-align":"right",margin:"0"}},xe={class:"mt-3"},Ee=P({__name:"CloudSync",setup(O){const c=G(),m=b(!1),d=b(!1),y=b(!1),r=b(!1),p=b(null),i=b(!1),n=b(!1),w=b(!1),v=b(!1),x=b(null),S=H(()=>/(code-server|Cursor|Trae|Windsurf)/i.test(x.value));J(()=>{m.value=c.config.autoSync,f.on("appName",l=>{x.value=l}).on("downloadConfirm",()=>{w.value=!1,r.value=!0}).on("downloadResult",({success:l,message:a})=>{w.value=!1,L({duration:l?1e3:3e3,message:a,type:l?"success":"error"})}).on("uploadRes",({success:l,message:a})=>{i.value=!1,L({duration:l?1e3:3e3,message:a,type:l?"success":"error"})}).on("removeRes",({success:l,message:a})=>{n.value=!1,L({duration:l?1e3:3e3,message:a,type:l?"success":"error"})}).on("syncKey",l=>{(!p.value||v.value)&&(p.value=l,v.value=!1)})});const _=()=>{f.emit("updateOption",{name:"autoSync",value:m.value})},$=()=>{f.emit("open","https://github.com/cweijan/vscode-database-client/wiki/About-Cloud-Sync")},K=()=>{v.value=!0,f.emit("chooseSyncKey")},z=()=>{if(!c.isPay){Q("Free account not support upload configuration!");return}d.value=!1,i.value=!0,f.emit("uploadConfig",p.value)},X=()=>{y.value=!1,n.value=!0,f.emit("removeConfig")},j=l=>{if(!c.isPay){Q("Free account not support sync data!");return}r.value=!1,w.value=!0,f.emit("downloadConfig",{keyPath:p.value,type:l})},Y=l=>{if(!c.user){Q("Please log in to your account first."),l.stopPropagation();return}};return(l,a)=>{const C=E("vsc-button"),F=E("vsc-switch"),q=T,Z=te;return g(),A(B,{class:"!mb-3"},{default:o(()=>[s("div",Ce,[s("div",$e,[u(t(l.$t("console.sync"))+" ",1),e(C,{class:"ml-2",size:"micro",onClick:$},{default:o(()=>a[10]||(a[10]=[s("i",{class:"el-icon-document"},null,-1)])),_:1})]),S.value?U("",!0):(g(),V("div",be,[s("label",ke,t(l.$t("console.autoSync")),1),e(F,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=k=>m.value=k),onChange:_},null,8,["modelValue"])])),s("div",{class:"mt-2",onClickCapture:Y},[e(q,{placement:"top",visible:y.value,trigger:"manual"},{reference:o(()=>[e(C,{type:"secondary",size:"mini",icon:"codicon-trash",loading:n.value,onClick:a[2]||(a[2]=k=>y.value=!0)},{default:o(()=>[u(t(l.$t("console.remove")),1)]),_:1},8,["loading"])]),default:o(()=>[s("p",he,t(l.$t("console.removeConfirm")),1),s("div",we,[e(C,{type:"secondary",size:"mini",onClick:a[1]||(a[1]=k=>y.value=!1)},{default:o(()=>[u(t(l.$t("common.cancel")),1)]),_:1}),e(C,{size:"mini",onClick:X},{default:o(()=>[u(t(l.$t("result.confirm")),1)]),_:1})])]),_:1},8,["visible"]),e(q,{placement:"top",visible:d.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(C,{icon:"codicon-cloud-upload",size:"mini",loading:i.value,onClick:a[4]||(a[4]=k=>d.value=!0)},{default:o(()=>[u(t(l.$t("console.upload")),1)]),_:1},8,["loading"])]),default:o(()=>[s("p",Se,t(l.$t("console.uploadConfirm")),1),s("div",ze,[e(C,{type:"secondary",onClick:a[3]||(a[3]=k=>d.value=!1)},{default:o(()=>[u(t(l.$t("common.cancel")),1)]),_:1}),e(C,{onClick:z},{default:o(()=>[u(t(l.$t("result.confirm")),1)]),_:1})])]),_:1},8,["visible"]),e(q,{placement:"top",visible:r.value,trigger:"manual",class:"ml-7px"},{reference:o(()=>[e(C,{icon:"codicon-cloud-download",size:"mini",loading:w.value,onClick:a[8]||(a[8]=k=>j())},{default:o(()=>[u(t(l.$t("console.download")),1)]),_:1},8,["loading"])]),default:o(()=>[s("p",Ve,t(l.$t("console.mergeConfirm")),1),s("div",Oe,[e(C,{type:"secondary",onClick:a[5]||(a[5]=k=>r.value=!1)},{default:o(()=>[u(t(l.$t("common.cancel")),1)]),_:1}),e(C,{onClick:a[6]||(a[6]=k=>j("merge"))},{default:o(()=>[u(t(l.$t("console.merge")),1)]),_:1}),e(C,{onClick:a[7]||(a[7]=k=>j("overwrite"))},{default:o(()=>[u(t(l.$t("console.overwrite")),1)]),_:1})])]),_:1},8,["visible"]),s("div",xe,[e(Z,{modelValue:p.value,"onUpdate:modelValue":a[9]||(a[9]=k=>p.value=k),size:"small",class:"!w-56",placeholder:"Sync Encryption Key(Optional)"},null,8,["modelValue"]),e(C,{icon:"codicon-file",size:"mini",class:"!ml-1 relative",style:{top:"3px"},onClick:K})])],32)])]),_:1})}}}),Ae={style:{"min-width":"290px"}},Le={style:{"font-size":"16px","font-weight":"700","padding-bottom":"0","padding-top":"8px"}},Pe={class:"mt-3 mb-2"},We={class:"mt-3 mb-1"},Fe=P({__name:"OtherOptions",setup(O){b(!1);const c=()=>{f.emit("clearCache")},m=()=>{f.emit("open","https://github.com/cweijan/vscode-database-client/issues")};return(d,y)=>{const r=E("vsc-button");return g(),A(B,null,{default:o(()=>[s("div",Ae,[s("div",Le,t(d.$t("console.other")),1),s("div",Pe,[e(r,{icon:"codicon-chrome-close",size:"mini",onClick:y[0]||(y[0]=p=>{h(f).emit("closeAllConnections")})},{default:o(()=>[u(t(d.$t("toolbar.closeAllConnections")),1)]),_:1})]),s("div",We,[e(r,{icon:"codicon-github-inverted",size:"mini",onClick:m},{default:o(()=>[u(t(d.$t("toolbar.reportIssue")),1)]),_:1}),e(r,{icon:"codicon-clear-all",size:"mini",onClick:c},{default:o(()=>[u(t(d.$t("toolbar.clearCache")),1)]),_:1})])])]),_:1})}}}),Ne=P({__name:"ConsoleSide",setup(O){return(c,m)=>(g(),V("div",null,[e(ye),e(Ee),e(Fe)]))}}),Be={editor:["enableSQLVariable","enableEditorCodeLens","highlightSQLBlock","bindConnectionByActiveMark"],result:["openResultsAsVertically","splitEditorWhenQuery","autoGetTableCount"],treeView:["showSecurity","saveConnectionExpandedState","terminalLocation"],sql:["escapedAllObjectName","rememberSQLVariables","capitalizeKeywordsWhenFormatting","autoPagingSQL","queryWithSchema"]};function N(O,c){const m=Be[O];return c.filter(d=>m.includes(d.name)).sort((d,y)=>m.indexOf(d.name)-m.indexOf(y.name))}const M={escapedAllObjectName:[{value:"auto",label:"Auto"},{value:"never",label:"Never"},{value:"always",label:"Always"}],terminalLocation:[{value:"Panel",label:"Panel"},{value:"Editor",label:"Editor"}]},Ke={class:"flex flex-wrap justify-center console-container"},je={class:"option-container"},qe={class:"option-title"},Qe={class:"option-list"},Ie={key:0,class:"flex"},Re={class:"shrink-0"},Ue=P({__name:"console",setup(O){const c=b([]),m=H(()=>[{title:W("console.editorOptions"),options:N("editor",c.value),tag:"dbclient-editor"},{title:W("console.sqlOptions"),options:N("sql",c.value),tag:"dbclient-sql-parser"},{title:W("console.treeOptions"),options:N("treeView",c.value)},{title:W("console.resultOptions"),options:N("result",c.value)}]);J(async()=>{f.emit("options").on("options",({options:r})=>{c.value=r}).on("configSuccess",r=>{L({message:r,type:"success"})}).on("resetSuccess",r=>{L({message:r,type:"success"}),f.emit("options")}).init()});const d=r=>{f.emit("resetOption",r)},y=r=>{let p=r.value;r.type=="boolean"&&(p=!r.value,r.value=p),f.emit("updateOption",{...r,value:p})};return(r,p)=>{const i=E("vsc-button"),n=E("vsc-tooltip"),w=ne,v=se,x=le;return g(),V("div",Ke,[e(Ne),s("div",je,[(g(!0),V(I,null,R(m.value,(S,_)=>(g(),A(B,{key:_,style:{"max-width":"350px","min-width":"300px"}},{default:o(()=>[s("div",qe,t(S.title),1),e(n,{title:h(W)("console.resetConfig")},{default:o(()=>[e(i,{icon:"codicon-discard",size:"micro",onClick:$=>d(S.options)},null,8,["onClick"])]),_:2},1032,["title"]),S.tag?(g(),A(n,{key:0,title:"Show More Settings"},{default:o(()=>[e(i,{icon:"codicon-ellipsis",size:"micro",onClick:$=>h(f).emit("openMoreSettings",S.tag)},null,8,["onClick"])]),_:2},1024)):U("",!0),s("div",Qe,[(g(!0),V(I,null,R(S.options,($,K)=>(g(),V("div",{key:K,class:"option-item"},[h(M)[$.name]?(g(),V("div",Ie,[s("span",Re,t($.description),1),e(v,{modelValue:$.value,"onUpdate:modelValue":z=>$.value=z,class:"w-28",size:"small",onChange:z=>y($)},{default:o(()=>[(g(!0),V(I,null,R(h(M)[$.name],z=>(g(),A(w,{key:z.value,value:z.value,label:z.label},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):$.type=="boolean"?(g(),A(x,{key:1,"model-value":$.value,onChange:z=>y($)},{default:o(()=>[u(t($.description),1)]),_:2},1032,["model-value","onChange"])):U("",!0)]))),128))])]),_:2},1024))),128))])])}}}),to=D(Ue,[["__scopeId","data-v-25cca18a"]]);export{to as default};
